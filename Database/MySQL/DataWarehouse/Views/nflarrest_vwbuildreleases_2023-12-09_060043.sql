/*!40101 SET NAMES utf8 */;
/*!40014 SET FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET SQL_NOTES=0 */;


CREATE OR REPLACE VIEW `vwbuildreleases` AS select `br`.`build_release_id` AS `build_release_id`,`e`.`build_environment_id` AS `build_environment_id`,`e`.`build_environment_name` AS `build_environment_name`,`e`.`build_environment_description` AS `build_environment_description`,`rt`.`build_release_type_id` AS `build_release_type_id`,`rt`.`build_release_type_name` AS `build_release_type_name`,`rt`.`build_release_type_description` AS `build_release_type_description`,`br`.`build_release_version` AS `build_release_version`,`br`.`build_release_description` AS `build_release_description`,`br`.`build_release_date` AS `build_release_date`,(select max(`build_release_detail`.`build_release_detail_value`) AS `cnt` from `build_release_detail` where ((`build_release_detail`.`build_release_id` = `br`.`build_release_id`) and (`build_release_detail`.`build_release_detail_type_id` = 1))) AS `build_release_detail_filecount`,(select max(`build_release_detail`.`build_release_detail_value`) AS `cnt` from `build_release_detail` where ((`build_release_detail`.`build_release_id` = `br`.`build_release_id`) and (`build_release_detail`.`build_release_detail_type_id` = 3))) AS `build_release_detail_commithash`,(select max(`build_release_detail`.`build_release_detail_value`) AS `cnt` from `build_release_detail` where ((`build_release_detail`.`build_release_id` = `br`.`build_release_id`) and (`build_release_detail`.`build_release_detail_type_id` = 4))) AS `build_release_detail_ArrestCount`,(select group_concat(`build_release_detail`.`build_release_detail_value` separator ', ') from `build_release_detail` where ((`build_release_detail`.`build_release_id` = `br`.`build_release_id`) and (`build_release_detail`.`build_release_detail_type_id` = 2)) group by `build_release_detail`.`build_release_id`) AS `build_release_detail_commitfiles`,(select concat('[',group_concat(concat('\'',`build_release_detail`.`build_release_detail_value`,'\'') separator ', '),']') from `build_release_detail` where ((`build_release_detail`.`build_release_id` = `br`.`build_release_id`) and (`build_release_detail`.`build_release_detail_type_id` = 2)) group by `build_release_detail`.`build_release_id`) AS `build_release_detail_commitfiles_json` from ((`build_release` `br` join `build_environment` `e` on((`br`.`build_environment_id` = `e`.`build_environment_id`))) join `build_release_type` `rt` on((`rt`.`build_release_type_id` = `br`.`build_release_type_id`))) order by `br`.`build_release_id` desc;